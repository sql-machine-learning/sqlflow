language: go

branches:
  only:
  - gh-pages
  - /.*/

service:
  - docker

before_install:
  - ls -lah
  - docker build -t sqlflow:dev -f Dockerfile.dev .
  # TODO(tony): change tonyyang-svail to sql-machine-learning
  - docker run --rm -v $GOPATH:/go -w /go/src/github.com/tonyyang-svail/sqlflow sqlflow:dev go generate ./...

script:
  - ls -lah
  # TODO(tony): change tonyyang-svail to sql-machine-learning
  - docker run --rm -v $GOPATH:/go -w /go/src/github.com/tonyyang-svail/sqlflow sqlflow:dev go test -v ./...
