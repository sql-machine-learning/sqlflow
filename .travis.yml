language: go

branches:
  only:
  - gh-pages
  - /.*/

service:
  - docker

before_install:
  - ls -lah
  - docker build -t sqlflow:dev -f Dockerfile.dev .
  - docker run --rm -v $GOPATH:/go -w /go/src/github.com/sql-machine-learning/sqlflow sqlflow:dev go generate ./...

script:
  - ls -lah
  - docker run --rm -v $GOPATH:/go -w /go/src/github.com/sql-machine-learning/sqlflow sqlflow:dev go test -v ./...
